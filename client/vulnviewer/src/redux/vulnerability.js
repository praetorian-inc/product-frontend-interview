import { createSlice } from '@reduxjs/toolkit';
const axios = require("axios").default;

export const vulnerabilitySlice = createSlice({
  name: 'vulnerability',
  initialState: {
    allVulnerabilities: [],
  },
  reducers: {
    loadAllVulnerabilities: (state, action) => {
      return {
        ...state,
          allVulnerabilities: action.payload.allVulnerabilities
      }
    }
  }
})

export function loadAllVulnerabilities() {
  return async (dispatch, getState) => {
    try {
      const response = await axios.get("/api/v1/vulnerability");

      const allVulnerabilities = response.data;

      dispatch({
        type: "vulnerability/loadAllVulnerabilities",
        payload: { allVulnerabilities: allVulnerabilities.data },
      });

    } catch (err) {
      console.log(err);
      // Do nothing
    } 
  }
}

export const selectAllVulnerabilities = state => {
  return state.vulnerability.allVulnerabilities;
}

export default vulnerabilitySlice.reducer;
