import Redux from 'redux';
import { createSlice } from '@reduxjs/toolkit';
const axios = require("axios").default;


export const vulnerabilitySlice = createSlice({
  name: 'vulnerability',
  initialState: {
    allVulnerabilities: [],
  },
  reducers: {
    getAllVulnerabilities: (state, action) => {
      state.allVulnerabilities = action.payload.allVulnerabilities
    }
  }
})

export function loadAllVulnerabilities() {
  return async (dispatch: Redux.Dispatch) => {
    try {
      const allVulnerabilities = await axios.get("/api/v1/vulnerability");

      dispatch({
        type: "vulnerability/loadAllVulnerabilities",
        allVulnerabilities: JSON.parse(allVulnerabilities)
      });

    } catch (err) {
      // Do nothing
    } 
  }
}

export const selectAllVulnerabilities = state => {
  return state.allVulnerabilities;
}

export default vulnerabilitySlice.reducer;
